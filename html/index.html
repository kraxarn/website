<!DOCTYPE html>
<html lang="en">
<head>
	<title>Home Page</title>
	<link rel="stylesheet" type="text/css" href="/css/main.css">
	<!-- No icon, assume browser will use /favicon.ico -->
</head>

<body>

<div id="background"></div>

<div id="warningBrowser" class="warning"> <b> Warning! </b> <br> It seems like you're using an old browser, consider updating or getting a better browser. </div>

<div id="content">
	<img id="logo" src="/img/logo_v5.webp" alt="logo with text that's an image for no reason" onclick="toggleLogo()">
	<ul id="tabs">
		<li><a href="/servers">My Servers</a></li>
		<li><a href="https://kraxarn.github.io">My GitHub Page</a></li>
		<li><a href="https://github.com/kraxarn/website">Source Code</a></li>
	</ul>
	<p>
		Welcome to my website! My name is Kraxie (or kraxarn) and I am a software engineer from Sweden.<br/>
		I mostly specialize in developing fast and efficient open source cross-platform software.
		<br/> <br/>
		This website is mostly just a playground for me to try out new things. There is really nothing
		you can do here unless you came for a very specific purpose. In that case, see the above tabs for
		the different pages available. Hopefully more tabs will be available as the website is further developed.
		<br/> <br/>
		This website collects no information, not requiring a privacy policy. It is also open source,
		written in Go, and available under a AGPLv3 license.
	</p>
</div>

<div id="infoLeft">
	<span id="infoTextLeft"> </span>
</div>

<div id="infoRight">
	<span id="infoTextRight"> </span>
</div>

<div id="debug" onclick="toggleDebug();">
	v12.0-alpha.1
</div>

<div id="changelog">
	<span class="changelogTitle">v12.0</span>
	<ul>
		<li>Rewrite in Go</li>
		<li>Replaced animated background</li>
		<li>Removed 403/404 error pages</li>
		<li>Removed custom fonts</li>
		<li>Improved social links</li>
		<li>Replaced panel</li>
		<li>Replaced new logo with old one</li>
	</ul>
	<div id="olderChanges">
	</div>
	<p onclick="toggleOlderChanges()" id="showChanges"> Show all changes </p>
</div>

<div id="browserInfo">
	<span id="debugUserAgent"> [UserAgent] </span>
	<br>
	<span id="debugDoNotTrack"> [DoNotTrack] </span>
	<table>
	</table>
</div>

<table id="links">
	<tr>
		<td><a href="https://github.com/kraxarn"><div id="linkGithub"></div></a></td>
		<td><a href="https://twitter.com/kraxarn"><div id="linkTwitter"></div></a></td>
		<td><a href="https://steamcommunity.com/id/kraxarn"><div id="linkSteam"></div></a></td>
		<td><a href="https://t.me/Kraxie"><div id="linkTelegram"></div></a></td>
	</tr>
</table>

<script src="/js/info.js"></script>
<span id="browser" onclick="toggleDebug();"></span>
<script src="/js/browser.js"></script>
<script>
/* Vars */
let showDebug = false
const debug = document.getElementById('debug')
const changelog = document.getElementById('changelog')
const browserInfo = document.getElementById('browserInfo')
const text = info

/* Browser checking */
let support
switch(browser) {
	case "Chrome":
	case "Firefox":
	case "Vivaldi":
	case "Opera":
		support = "full support."
		break
	case "Internet Explorer":
		support = "partial support, no music, video, background or fonts."
		break
	case "Edge":
	case "Safari":
	case "Silk":
		support = "partial support, no music, video or background."
		break;
	default:
		support = "unknown support."
		break;
}
if (browser === "Firefox" || browser === "Chrome" || browser === "Vivaldi") {
	support = "full support."
}

document.getElementById('browser').textContent = `You're running ${browser} ${browserVer} with ${support}`
document.getElementById('debugUserAgent').textContent = navigator.userAgent;

document.getElementById('debugDoNotTrack').textContent = `Do not track: ${navigator.doNotTrack === "1" ? "Enabled" : "Disabled"}`

/* Debug toggle */
function toggleDebug() {
	if (showDebug) {
		changelog.style.transform = 'translate(100%, 0)'
		browserInfo.style.transform = 'translate(-50%, -150%)'
		showDebug = false
	} else {
		changelog.style.transform = 'translate(-25%, 0)'
		browserInfo.style.transform = 'translate(-50%, 100%)'
		showDebug = true
	}
}

/* Browser warning */
if (!supportOgg || !supportWebm) {
	document.getElementById('warningBrowser').style.display = "block"
}

/**
 * Info
 * @return {string}
 */
function GetInfoSide(info) {
	switch (info) {
		case "myServers":
		case "fileUploader":
		case "api":
			return "right"
		case "myApps":
		case "steam":
		case "users":
		case "privacy":
			return "left"
		default:
			alert("Error: Unexpected info switch! :(")
			return "unknown"
	}
}

function ShowInfo(info) {
	const side = GetInfoSide(info)
	if (side === "left") {
		document.getElementById("infoLeft").textContent = text[info]
		document.getElementById("infoLeft").style.transform = "translate(-402px, -50%)" // -392 -92

	} else if (side === "right") {
		document.getElementById("infoRight").textContent = text[info]
		document.getElementById("infoRight").style.transform = "translate(168px, -50%)" // 136 -92
	}
}

function HideInfo(info) {
	const side = GetInfoSide(info)
	if (side === "left") {
		document.getElementById("infoLeft").textContent = ""
		document.getElementById("infoLeft").style.transform = "translate(-50%, -50%)" // -50% -92

	} else if (side === "right") {
		document.getElementById("infoRight").textContent = ""
		document.getElementById("infoRight").style.transform = "translate(-50%, -50%)" // -50% -92
	}
}

function toggleLogo()  {
	const logo = document.getElementById("logo")
	if (logo.src.includes("logo_v7")) {
		// Using new logo, switch to old one
		logo.src = "img/logo_v5.webp"
	} else {
		// Using old logo, switch to new one
		logo.src = "img/logo_v7_lightblue.webp"
	}
}

function toggleOlderChanges() {
	const olderChanges = document.getElementById("olderChanges")
	const showChanges  = document.getElementById("showChanges")
	if (olderChanges.style.display === "none" || olderChanges.style.display === "") {
		// Hidden, show them
		olderChanges.style.display = "block"
		showChanges.textContent = "Show latest changes"
	} else {
		// Already shown, hide them
		olderChanges.style.display = "none"
		showChanges.textContent = "Show all changes"
	}
}

function setBackground() {
	document.getElementById("background").style.backgroundImage = `url("/img/bg/${Math.floor(new Date().getHours() / 2)}.webp")`
}
setBackground()

</script>
</body>
</html>